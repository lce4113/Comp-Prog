ex = `01100010000000001000000000000000000101100001000101010110001011001000100000000010000100011000111000110100`
// ex2 = ``

real = `00100010000011010110010001001000001100000000010000101000000000100001111110011110111111100110011010001101001111110101111111010110000000100101000101100101110000000000110001100000001011111100100110000000101101000101000000000010101001000000010000000000101101000000001001010100100010000000100010100011000100000000001010000100000000001100000000000001101101011100110000000000101100010000000000101001110000000000100101100000000100011100000000000000001111000101010100000000001111000000000000101000001001110000000000100101010000000000110000010000000000101110010011110001100100001001100111110111011000000000000101000010110010000000000100001001100011001101000001110110000100101001000000000010000110110001100101100010011111000001110100110000000001111110001100111100010010101000101001100100000000010100001111001110100001011100101110011101010010010001010001001100000100110100100100100111000100000000100000100011001001110101110011000010100011011001110000000001001000110100101111010010000111111000000101000100101001101111100100001101000110110010100000000100111100111001101110010111001010110001001111011001110101100000100100111001001110000100111111100010100110111010001110111000100000000011010100110101111010001101111100000100111100110011101111000100101011111100101011111100100111100100111011100011001001100000000011000100111000101111010010001001011011001110000001111001100000000010110101000000000100100001010010001101111101011010110010111001110010001101111101011010110010111001110011011000001000010000000001111000011101000000000101001011010011101100111000011010100011111110111110011101000110111100110001110010101000101001001110100000111010000000000111000111110010011100101000110110101001011010100111010110001110010110111110001111110011000101001011010001100011101001000111100111011111011101100111101011000101100110010010011010101010011110110010011101101001001111010001100000000010101100111001111111100100001101111110100011000010111010000101100000000001100110101000100000000011111100010001001000111010110000010111000100000000011011100000101001000111110010001010100010000000000010000001010001110100100100011110000101011001100000000010010100100111000011110001110011101000000000100111001000111100001100101001111111101111001100111101110111111110001000101100000000000000001011100100000101101000111100000110000000001010110011111101111001100100001110100000000010100100110111010110101100011111011101111000101101110010100010000011000010110000010000000001001110010010111110100111110011100100101101000011101001000000000111001111010011000101100011010011000000000010010000011001100111111111111000110110011110011001100111111111111000110110011111000011000000000101101001001111111000111111101000000000100100000000000000100001000100011010001000111111110000100100000000000000010000110110001110101100001001001000111010100110000000001010010000001111111000000000110101011100010000000001100110001111011100001010011000011111000000000000001000011101000100111110001011010100010011100010000000001101110011100111101011011001110010001000111100000000001110010011001100011101001011101001000110101100001010110101000010110000000000000111011110100000111001001011000000101100001101111001001110100011110110011000000000100101010000000001101010101000100000000011101100000110011000011001110001101000000000000000010000111010000111111100001000111000011000010011111100110101111000010000000010100010011100000110011001010101110100100100011001011100101001010110101100001001100101101100101011111111000111011010000001000100111000000110001000000000011001001111001000111011100011011011000011001001001111100101011100101001101001110000100110110110010010001101100100101101100110011101111001110101100011111010100000011100010000000010001100001101100000000010011000000000000010000110010001101001100011011111000111001100010000000001100010001000100100000100001000110000110010011000111010011000000000101001001001001100110100110000011001000100000000101000011010000000000000100001100100011100101000101111110000100110000000000000010000111010000101011100011110111000011000100010000000001111010001100110100010100101000100011101110000000010001010010110010101101001010011101111001000010000010101001001101011111000110001001111010110111110001000110011100111111000010110101001111010110001100000010000000001101010011110100000000010011100110111001010001101001011001100010100110111001010001101001011001100110100101010101000100110000000001010010001100110101000000000011111001110011010000000111001011110011110011110111111101011000001110011011000000000010000011010011010110010000011010000111101001100000000100001100110000010110010010110011011011001100000010000100110010011101110011110100111110011101100011100011110010111000011000000000010111001010101110111001100000000010100100110111101010010111111001010101100111101111110000111111011000000000100101001011010101111101111000001111100111011110010011010011000100000000000010000100100110000100100100100000000010101011011001100010000011011001110000000000101010111100101101110101010111100101101110101010000001000000001001011011111000000000010111001001001101011110101101010110000110110101100010011001110001100010001110001011111100111110101111010011101100011011110001100100001011101100000000100001111111001010001111100100101100110010110010011111111010010101110111011110010110010011101110001000011100101011111111101111101101010011010000110111000000000111011000010001010011011010011001001001001000111001100000000010100101000000000101001001110010011111011000011101110101010001100101100100111110110000111011101010100011001001001011010110110011010101100101011000000000001111101110010101100101110111001000110010011000000000100111001010110000000110101101000000000100011001011111010000100101001011001101000`
// real2 = ``

a = ex
a = real
// c = ex2
// c = real2

// b = a.split(',')
// b = a.split('\n')
// let b = parseInt(a, 16).toString(2);
// while (b.length != 4 * a.length) b = '0' + b
b = a
// b = a.split('\n').map(x => x.match(/(.+) -> (.+)/).slice(1))
// b = a.split('\n').map(x => x.match(/\d+/g).map(Number))

thing1 = `0 = 0000
1 = 0001
2 = 0010
3 = 0011
4 = 0100
5 = 0101
6 = 0110
7 = 0111
8 = 1000
9 = 1001
A = 1010
B = 1011
C = 1100
D = 1101
E = 1110
F = 1111`

let thing = new Map(thing1.split('\n').map(x => x.match(/(.+) = (.+)/).slice(1).reverse()))

function rec(B, x) {
  // if (x == 0) return
  if (x != -1) x--
  if (B == "" || B == '0'.repeat(B.length)) return
  version = thing.get('0' + B.substring(0, 3))
  id = thing.get('0' + B.substring(3, 6))
  // console.log(B);
  // console.log("version", version);
  if (id == '4') {
    let i = 6;
    while (B[i] != '0') {
      i += 5
      // ans += B.substring(i + 1, i + 5)
    }
    return [...rec(B.slice(i + 5), x), version]
  } else if (B[6] == '1') {
    let len = parseInt(B.substring(7, 7 + 11), 2)
    rec(B.slice(7 + 11), len)
  } else if (B[6] == '0') {
    let len = parseInt(B.substring(7, 7 + 15), 2)
    rec(B.substring(7 + 15, 7 + 15 + len), -1)
    rec(B.slice(7 + 15 + len), x)
  } else {
    console.log("uh oh")
  }
}

// console.log(b);
rec(b, -1)
console.log(ans);
// console.log(parseInt(ans, 2))